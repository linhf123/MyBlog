---
title: "权限控制测试文章"
excerpt: "这是一篇用于测试管理员权限控制的文章，只有管理员才能成功上传。"
author: "管理员"
---

# 权限控制测试文章

这是一篇测试文章，用于验证博客的管理员权限控制功能。

## 🔐 权限控制特性

### 已实现的功能

- ✅ **API 权限验证**：只有管理员可以调用上传 API
- ✅ **页面访问控制**：非管理员无法访问上传页面
- ✅ **导航栏隐藏**：非管理员用户看不到上传按钮
- ✅ **环境变量配置**：支持邮箱和用户ID双重配置

### 安全验证点

1. **身份认证**：必须登录才能尝试上传
2. **权限检查**：检查用户是否在管理员列表中
3. **前端隐藏**：非管理员用户无法看到上传入口
4. **后端验证**：API 层面的双重权限检查

## 📋 测试步骤

### 管理员用户测试
1. 配置环境变量 `ADMIN_EMAILS` 包含你的邮箱
2. 重启开发服务器
3. 使用 GitHub 登录
4. 应该能看到导航栏的"上传"按钮
5. 可以正常访问 `/admin/upload` 页面
6. 可以成功上传此测试文件

### 非管理员用户测试
1. 使用不在管理员列表中的账号登录
2. 导航栏应该不显示"上传"按钮
3. 直接访问 `/admin/upload` 应该显示权限不足页面
4. API 调用应该返回 403 错误

## 🎯 配置提醒

记得在 `.env.local` 中配置你的邮箱：

```bash
ADMIN_EMAILS="your-actual-email@gmail.com"
```

如果这个文件能够成功上传，说明权限控制系统工作正常！🎉 